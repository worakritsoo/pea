"use strict";

exports.__esModule = true;
exports.setReactiveContext = void 0;

var _svelte = require("svelte");

// eslint-disable-next-line
var setReactiveContext = function setReactiveContext(name, getValue) {
  var contextCallbacks = [];

  var contextSubscribe = function contextSubscribe(callback) {
    contextCallbacks.push(callback);
  };

  var contextUnsubscribe = function contextUnsubscribe(callback) {
    if (contextCallbacks.indexOf(callback) >= 0) {
      contextCallbacks.splice(contextCallbacks.indexOf, callback);
    }
  };

  var contextRunCallbacks = function contextRunCallbacks() {
    contextCallbacks.forEach(function (callback) {
      callback(getValue());
    });
  };

  (0, _svelte.setContext)(name, {
    value: getValue(),
    subscribe: contextSubscribe,
    unsubscribe: contextUnsubscribe
  });
  (0, _svelte.beforeUpdate)(function () {
    contextRunCallbacks();
  });
};

exports.setReactiveContext = setReactiveContext;